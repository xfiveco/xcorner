{{#partial "page"}}
{{inject 'comparisons' comparisons}}
{{inject 'compareRemoveMessage' (lang 'compare.no_remove')}}

{{> components/common/breadcrumbs breadcrumbs=breadcrumbs}}

<h1>
    {{lang 'compare.header' products=comparisons.length}}
</h1>

<div>
    <div>
        {{#each comparisons}}
            <div>
                <article>
                    <figure>
                        <a 
                            aria-label="{{name}}" 
                            href="{{url}}" 
                            {{#if settings.data_tag_enabled}} 
                                data-event-type="product-click" 
                            {{/if}}
                        >
                            <div>
                                {{> components/common/image
                                    image=image
                                    fallback_size=../theme_settings.product_size
                                    default_image=../theme_settings.default_image_product
                                }}
                            </div>
                        </a>
                        <a 
                            class="js-comparison-remove" 
                            href="{{#if remove_url}}{{remove_url}}{{else}}#{{/if}}"
                        >
                            <svg>
                                <use href="#icon-close"></use>
                            </svg>
                        </a>
                    </figure>
                    <div>
                        {{#if brand.name}}
                            <p>
                                <a href="{{brand.url}}">
                                    {{ brand.name }}
                                </a>
                            </p>
                        {{/if}}
                        <div>
                            <a href="{{url}}">
                                {{ name }}
                            </a>
                        </div>
                        {{#or ../customer (unless ../settings.hide_price_from_guests)}}
                            {{#if price_range}}
                                {{> components/products/price-range}}
                            {{else}}
                                {{> components/products/price price=price}}
                            {{/if}}
                        {{else}}
                            {{> components/common/login-for-pricing}}
                        {{/or}}
                    </div>
                </article>
            </div>
        {{/each}}
    </div>
    <div>
        {{#each comparisons}}
            <div>
                {{#if show_cart_action}}
                    {{#if has_options}}
                        <a 
                            href="{{url}}" 
                            {{#if settings.data_tag_enabled}} 
                                data-event-type="product-click" 
                            {{/if}} 
                            class="c-button c-button--primary" 
                            data-product-id="{{id}}"
                        >
                            {{lang 'products.choose_options'}}
                        </a>
                    {{/if}}
                    {{#if pre_order}}
                        <a 
                            href="{{url}}" 
                            {{#if settings.data_tag_enabled}} 
                                data-event-type="product-click" 
                            {{/if}} 
                            class="c-button c-button--primary" 
                            data-product-id="{{id}}"
                        >
                            {{lang 'products.pre_order'}}
                        </a>
                    {{/if}}
                    {{#if add_to_cart_url}}
                        <a 
                            href="{{add_to_cart_url}}" 
                            {{#if settings.data_tag_enabled}} 
                                data-event-type="product-click" 
                            {{/if}} 
                            class="c-button c-button--primary" 
                            data-product-id="{{id}}"
                        >
                            {{lang 'products.add_to_cart'}}
                        </a>
                    {{/if}}
                    {{#if out_of_stock_message}}
                        <a href="{{url}}" class="c-button c-button--primary" data-product-id="{{id}}">
                            {{out_of_stock_message}}
                        </a>
                    {{/if}}
                {{/if}}
            </div>
        {{/each}}
    </div>
    <div>
        <div>
            <span>
                {{lang 'products.description'}}
            </span>
        </div>
        {{#each comparisons}}
            <div>
                {{{ summary }}}
            </div>
        {{/each}}
    </div>

    {{#if settings.show_product_rating}}
        <div>
            <div>
                <span>
                    {{lang 'products.reviews.rating_label'}}
                </span>
            </div>
            {{#each comparisons}}
                <div>
                    {{#if rating}}
                        {{> components/products/ratings rating=rating}}
                    {{else}}
                        {{lang 'products.reviews.no_reviews'}}
                    {{/if}}
                </div>
            {{/each}}
        </div>
    {{/if}}

    <div>
        <div>
            <span>
                {{lang 'products.availability'}}
            </span>
        </div>
        {{#each comparisons}}
            <div>
                {{#if availability}}
                    {{ availability }}
                {{else}}
                    {{lang 'common.not_applicable'}}
                {{/if}}
            </div>
        {{/each}}
    </div>
    <div>
        <div>
            <span>
                {{lang 'common.other_details'}}
            </span>
        </div>
        {{#each comparisons}}
            <div>
                {{#if custom_fields}}
                    <ul>
                        {{#each custom_fields}}
                            <li>
                                {{name}}: {{{value}}}
                            </li>
                        {{/each}}
                    </ul>
                {{else}}
                    {{lang 'common.not_applicable'}}
                {{/if}}
            </div>
        {{/each}}
    </div>
</div>

{{/partial}}
{{> layout/base}}
